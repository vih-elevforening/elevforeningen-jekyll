$(function(){var $btn=$("nav.greedy-nav .greedy-nav__toggle");var $vlinks=$("nav.greedy-nav .visible-links");var $hlinks=$("nav.greedy-nav .hidden-links");var $nav=$("nav.greedy-nav");var $logo=$('nav.greedy-nav .site-logo');var $logoImg=$('nav.greedy-nav .site-logo img');var $title=$("nav.greedy-nav .site-title");var $search=$('nav.greedy-nav button.search__toggle');var numOfItems,totalSpace,closingTime,breakWidths;function measureLinks(){numOfItems=0;totalSpace=0;closingTime=1000;breakWidths=[];function addWidth(i,w){totalSpace+=w;numOfItems+=1;breakWidths.push(totalSpace);}
function hiddenWidth(obj){var clone=obj.clone();clone.css("visibility","hidden");$vlinks.append(clone);addWidth(0,clone.outerWidth());clone.remove();}
$vlinks.children().outerWidth(addWidth);$hlinks.children().each(function(){hiddenWidth($(this))});}
measureLinks();var winWidth=$(window).width();var lastBreakpoint=winWidth<768?0:winWidth<1024?1:winWidth<1280?2:3;var availableSpace,numOfVisibleItems,requiredSpace,timer;function check(){winWidth=$(window).width();var curBreakpoint=winWidth<768?0:winWidth<1024?1:winWidth<1280?2:3;if(curBreakpoint!==lastBreakpoint)measureLinks();lastBreakpoint=curBreakpoint;numOfVisibleItems=$vlinks.children().length;availableSpace=$nav.innerWidth()
-($logo.length!==0?$logo.outerWidth(true):0)
-$title.outerWidth(true)
-($search.length!==0?$search.outerWidth(true):0)
-(numOfVisibleItems!==breakWidths.length?$btn.outerWidth(true):0);requiredSpace=breakWidths[numOfVisibleItems-1];if(requiredSpace>availableSpace){$vlinks.children().last().prependTo($hlinks);numOfVisibleItems-=1;check();}else if(availableSpace+(numOfVisibleItems===breakWidths.length-1?$btn.outerWidth(true):0)>breakWidths[numOfVisibleItems]){$hlinks.children().first().appendTo($vlinks);numOfVisibleItems+=1;check();}
$btn.attr("count",numOfItems-numOfVisibleItems);if(numOfVisibleItems===numOfItems){$btn.addClass('hidden');}else $btn.removeClass('hidden');}
$(window).resize(function(){check();});$btn.on('click',function(){$hlinks.toggleClass('hidden');$(this).toggleClass('close');clearTimeout(timer);});$hlinks.on('mouseleave',function(){timer=setTimeout(function(){$hlinks.addClass('hidden');},closingTime);}).on('mouseenter',function(){clearTimeout(timer);})
if($logoImg.length!==0){if(!($logoImg[0].complete||$logoImg[0].naturalWidth!==0)){$logoImg.one("load error",check);}else check();}else check();});